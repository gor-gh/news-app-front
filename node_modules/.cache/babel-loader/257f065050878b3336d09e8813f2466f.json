{"ast":null,"code":"import _classCallCheck from\"/home/gor/WebstormProjects/news-app/news-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/gor/WebstormProjects/news-app/news-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/gor/WebstormProjects/news-app/news-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/gor/WebstormProjects/news-app/news-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./LoginForm.css';import FormField from'../FormField/FormField';var LoginForm=/*#__PURE__*/function(_React$Component){_inherits(LoginForm,_React$Component);var _super=_createSuper(LoginForm);function LoginForm(){var _this;_classCallCheck(this,LoginForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={fields:{username:'',password:''},rememberMe:false,fieldErrors:{}};_this.onFormSubmit=function(e){e.preventDefault();var loginData=_this.state.fields;if(_this.validate())return;_this.props.login(loginData,_this.state.rememberMe);_this.setState();};_this.onInputChange=function(_ref){var name=_ref.name,value=_ref.value,error=_ref.error;var fields=Object.assign({},_this.state.fields);var fieldErrors=Object.assign({},_this.state.fieldErrors);fields[name]=value;fieldErrors[name]=error;_this.setState({fields:fields,fieldErrors:fieldErrors});};_this.toggleRememberMe=function(e){_this.setState(function(prevState){return{rememberMe:!prevState.rememberMe};});};_this.validate=function(){var fields=_this.state.fields;var fieldErrors=_this.state.fieldErrors;var errorMessages=Object.keys(fieldErrors).filter(function(key){return fieldErrors[key];});return!fields.username||!fields.password||errorMessages.length;};return _this;}_createClass(LoginForm,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"login_form_cont \".concat(this.props.longInputs?'longInputs':'')},/*#__PURE__*/React.createElement(\"h2\",{className:\"pb-3 login_header\"},\"Login to get access\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.onFormSubmit},/*#__PURE__*/React.createElement(FormField,{name:\"username\",type:\"text\",value:this.state.fields.username,onChange:this.onInputChange,placeholder:\"Username\",validate:function validate(val){return val?false:\"Username is required\";}}),/*#__PURE__*/React.createElement(FormField,{name:\"password\",onChange:this.onInputChange,value:this.state.fields.password,type:\"password\",placeholder:\"Password\",validate:function validate(val){return val?false:\"Password is required\";}}),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center pb-2\"},/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",name:\"rememberMe\",className:\"d-flex\",value:this.state.rememberMe,onChange:this.toggleRememberMe}),/*#__PURE__*/React.createElement(\"span\",null,\"Remember me\")),this.props.loginFailed?/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center pb-2\",style:{color:'red'}},\"Failed to login. Please try again\"):null,/*#__PURE__*/React.createElement(\"input\",{type:\"submit\",value:\"Login\",className:\"login_btn\",disabled:this.validate()})));}}]);return LoginForm;}(React.Component);export default LoginForm;","map":{"version":3,"sources":["/home/gor/WebstormProjects/news-app/news-app-front/src/components/LoginForm/LoginForm.js"],"names":["React","FormField","LoginForm","state","fields","username","password","rememberMe","fieldErrors","onFormSubmit","e","preventDefault","loginData","validate","props","login","setState","onInputChange","name","value","error","Object","assign","toggleRememberMe","prevState","errorMessages","keys","filter","key","length","longInputs","val","loginFailed","color","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './LoginForm.css';\nimport PropTypes from 'prop-types';\nimport FormField from '../FormField/FormField';\n\nclass LoginForm extends React.Component{\n    static propTypes = {\n        longInputs: PropTypes.bool,\n        login: PropTypes.func.isRequired,\n        loginFailed: PropTypes.bool.isRequired\n    }\n    state = {\n        fields: {\n            username: '',\n            password: ''\n        },\n        rememberMe: false,\n        fieldErrors: {}\n    }\n\n    onFormSubmit = (e) => {\n        e.preventDefault();\n        const loginData = this.state.fields;\n\n        if(this.validate()) return;\n\n        this.props.login(loginData, this.state.rememberMe);\n        this.setState()\n\n    }\n    onInputChange = ({name, value, error}) => {\n        const fields = Object.assign({}, this.state.fields);\n        const fieldErrors = Object.assign({}, this.state.fieldErrors);\n\n        fields[name] = value;\n        fieldErrors[name] = error;\n\n        this.setState({fields, fieldErrors});\n    }\n    toggleRememberMe = (e) => {\n        this.setState((prevState) => {\n            return {rememberMe: !prevState.rememberMe}\n        })\n    }\n    validate = () => {\n        const fields = this.state.fields;\n        const fieldErrors = this.state.fieldErrors;\n        const errorMessages = Object.keys(fieldErrors).filter(key => fieldErrors[key]);\n\n        return !fields.username || !fields.password || errorMessages.length;\n    }\n    render(){\n        return (\n            <div className={`login_form_cont ${this.props.longInputs ? 'longInputs' : ''}`}>\n                <h2 className='pb-3 login_header'>Login to get access</h2>\n                <form \n                    onSubmit={this.onFormSubmit}\n                >\n                    <FormField \n                        name='username'\n                        type='text'\n                        value={this.state.fields.username}\n                        onChange={this.onInputChange}\n                        placeholder='Username'\n                        validate={(val) => val ? false : \"Username is required\"}\n                    />\n                    <FormField\n                        name='password'\n                        onChange={this.onInputChange}\n                        value={this.state.fields.password}\n                        type='password'\n                        placeholder='Password'\n                        validate={(val) => val ? false : \"Password is required\"}\n                    />\n                    <div className='d-flex justify-content-center pb-2'>\n                        <input\n                            type=\"checkbox\"\n                            name=\"rememberMe\"\n                            className='d-flex'\n                            value={this.state.rememberMe}\n                            onChange={this.toggleRememberMe}\n                        />\n                        <span>Remember me</span>\n                    </div>\n                    {\n                        (this.props.loginFailed) ? (\n                            <div className='d-flex justify-content-center pb-2' style={{color: 'red'}}>\n                                Failed to login. Please try again\n                            </div>\n                        ) : (\n                            null\n                        )\n                    }\n                    <input\n                        type=\"submit\"\n                        value=\"Login\"\n                        className='login_btn'\n                        disabled={this.validate()}\n                    />\n                </form>\n            </div>\n        )\n    }\n}\n\nexport default LoginForm;"]},"metadata":{},"sourceType":"module"}