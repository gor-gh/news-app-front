{"ast":null,"code":"const LOCAL_STORAGE_KEY = 'my_key_for_tokens';\n\nclass Client {\n  constructor() {\n    this.login = data => {\n      const dataString = JSON.stringify(data);\n      fetch('/users/login', {\n        method: 'POST',\n        body: dataString\n      }).then(this.checkStatus).then(res => res.json()).then(json => this.setToken(json.token));\n    };\n\n    this.localeStorageIsEnabled = typeof localStorage !== 'undefined';\n\n    if (this.localeStorageIsEnabled) {\n      this.token = localStorage.getItem(LOCAL_STORAGE_KEY);\n\n      if (!this.token) {\n        this.token = sessionStorage.getItem(LOCAL_STORAGE_KEY);\n      }\n    }\n  }\n\n  isLoggedIn() {\n    return !!this.token;\n  }\n\n  setToken(token) {\n    this.token = token;\n\n    if (this.localeStorageIsEnabled) {\n      localStorage.setItem();\n    }\n  }\n\n  checkStatus(response) {\n    if (response.status >= 200 && response.status < 300) {\n      return response;\n    } else {\n      const error = new Error(`HTTP Error ${response.statusText}`);\n      error.status = response.statusText;\n      error.response = response;\n      console.log(error);\n      throw error;\n    }\n  }\n\n}\n\nexport const client = new Client();","map":{"version":3,"sources":["/home/gor/WebstormProjects/news-app/news-app-front/src/Client.js"],"names":["LOCAL_STORAGE_KEY","Client","constructor","login","data","dataString","JSON","stringify","fetch","method","body","then","checkStatus","res","json","setToken","token","localeStorageIsEnabled","localStorage","getItem","sessionStorage","isLoggedIn","setItem","response","status","error","Error","statusText","console","log","client"],"mappings":"AAAA,MAAMA,iBAAiB,GAAG,mBAA1B;;AAGA,MAAMC,MAAN,CAAY;AACRC,EAAAA,WAAW,GAAE;AAAA,SAYbC,KAZa,GAYJC,IAAD,IAAU;AACd,YAAMC,UAAU,GAAGC,IAAI,CAACC,SAAL,CAAeH,IAAf,CAAnB;AACAI,MAAAA,KAAK,CAAC,cAAD,EAAgB;AACjBC,QAAAA,MAAM,EAAE,MADS;AAEjBC,QAAAA,IAAI,EAAEL;AAFW,OAAhB,CAAL,CAIKM,IAJL,CAIU,KAAKC,WAJf,EAKKD,IALL,CAKUE,GAAG,IAAIA,GAAG,CAACC,IAAJ,EALjB,EAMKH,IANL,CAMUG,IAAI,IAAI,KAAKC,QAAL,CAAcD,IAAI,CAACE,KAAnB,CANlB;AAOH,KArBY;;AACT,SAAKC,sBAAL,GAA+B,OAAOC,YAAP,KAAwB,WAAvD;;AACA,QAAG,KAAKD,sBAAR,EAA+B;AAC3B,WAAKD,KAAL,GAAaE,YAAY,CAACC,OAAb,CAAqBnB,iBAArB,CAAb;;AACA,UAAG,CAAC,KAAKgB,KAAT,EAAgB;AACZ,aAAKA,KAAL,GAAaI,cAAc,CAACD,OAAf,CAAuBnB,iBAAvB,CAAb;AACH;AACJ;AACJ;;AACDqB,EAAAA,UAAU,GAAG;AACX,WAAO,CAAC,CAAC,KAAKL,KAAd;AACD;;AAWDD,EAAAA,QAAQ,CAACC,KAAD,EAAQ;AACZ,SAAKA,KAAL,GAAaA,KAAb;;AAEA,QAAG,KAAKC,sBAAR,EAA+B;AAC3BC,MAAAA,YAAY,CAACI,OAAb;AACH;AACJ;;AACDV,EAAAA,WAAW,CAAEW,QAAF,EAAY;AACnB,QAAIA,QAAQ,CAACC,MAAT,IAAmB,GAAnB,IAA0BD,QAAQ,CAACC,MAAT,GAAkB,GAAhD,EAAqD;AACjD,aAAOD,QAAP;AACH,KAFD,MAEO;AACH,YAAME,KAAK,GAAG,IAAIC,KAAJ,CAAW,cAAaH,QAAQ,CAACI,UAAW,EAA5C,CAAd;AACAF,MAAAA,KAAK,CAACD,MAAN,GAAeD,QAAQ,CAACI,UAAxB;AACAF,MAAAA,KAAK,CAACF,QAAN,GAAiBA,QAAjB;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAYJ,KAAZ;AACA,YAAMA,KAAN;AACH;AACJ;;AAxCO;;AA2CZ,OAAO,MAAMK,MAAM,GAAG,IAAI7B,MAAJ,EAAf","sourcesContent":["const LOCAL_STORAGE_KEY = 'my_key_for_tokens';\n\n\nclass Client{\n    constructor(){\n        this.localeStorageIsEnabled = (typeof localStorage !== 'undefined');\n        if(this.localeStorageIsEnabled){\n            this.token = localStorage.getItem(LOCAL_STORAGE_KEY)\n            if(!this.token) {\n                this.token = sessionStorage.getItem(LOCAL_STORAGE_KEY);\n            }\n        }\n    }\n    isLoggedIn() {\n      return !!this.token;\n    }\n    login = (data) => {\n        const dataString = JSON.stringify(data);\n        fetch('/users/login',{\n            method: 'POST',\n            body: dataString\n        })\n            .then(this.checkStatus)\n            .then(res => res.json())\n            .then(json => this.setToken(json.token))\n    }\n    setToken(token) {\n        this.token = token;\n\n        if(this.localeStorageIsEnabled){\n            localStorage.setItem()\n        }\n    }\n    checkStatus (response) {\n        if (response.status >= 200 && response.status < 300) {\n            return response;\n        } else {\n            const error = new Error(`HTTP Error ${response.statusText}`);\n            error.status = response.statusText;\n            error.response = response;\n            console.log(error);\n            throw error;\n        }\n    }\n}\n\nexport const client = new Client();"]},"metadata":{},"sourceType":"module"}