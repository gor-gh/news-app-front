{"ast":null,"code":"import _classCallCheck from\"/home/gor/WebstormProjects/news-app/news-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/gor/WebstormProjects/news-app/news-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/gor/WebstormProjects/news-app/news-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/gor/WebstormProjects/news-app/news-app-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import'./Login.css';import Loading from'../Loading/Loading';import LoginForm from'../LoginForm/LoginForm';import{Redirect}from'react-router-dom';import{client}from'../../Client';var Login=/*#__PURE__*/function(_React$Component){_inherits(Login,_React$Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={_loginInProcess:false,_loginFailed:false,_shouldRedirect:false};_this.login=function(data,rememberMe){var username=data.username,password=data.password;_this.setState({_loginInProcess:true},function(){client.login({username:username,password:password},rememberMe).then(function(){_this.props.loggedInCallback();_this.setState({_loginInProcess:false,_shouldRedirect:true});}).catch(function(err){console.log(err.response);_this.setState({_loginInProcess:false,_loginFailed:true});});});};_this.redirectPath=function(){if(!_this.props.location)return'/login';var locationState=_this.props.location.state;var pathname=locationState&&locationState.from&&locationState.from.pathname;return pathname||'/';};return _this;}_createClass(Login,[{key:\"componentDidMount\",value:function componentDidMount(){if(client.isLoggedIn()){this.setState({_shouldRedirect:true});}}},{key:\"render\",value:function render(){if(this.state._shouldRedirect){return/*#__PURE__*/React.createElement(Redirect,{to:this.redirectPath()});}else if(this.state._loginInProcess){return/*#__PURE__*/React.createElement(\"div\",{className:\"mx-auto d-flex align-items-center justify-content-center login_form_container\"},/*#__PURE__*/React.createElement(Loading,{velocity:\"slow\"}));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"mx-auto login_form_container\"},/*#__PURE__*/React.createElement(LoginForm,{longInputs:true,login:this.login,loginFailed:this.state._loginFailed}));}}}]);return Login;}(React.Component);export default Login;","map":{"version":3,"sources":["/home/gor/WebstormProjects/news-app/news-app-front/src/components/Login/Login.js"],"names":["React","Loading","LoginForm","Redirect","client","Login","state","_loginInProcess","_loginFailed","_shouldRedirect","login","data","rememberMe","username","password","setState","then","props","loggedInCallback","catch","err","console","log","response","redirectPath","location","locationState","pathname","from","isLoggedIn","Component"],"mappings":"opBAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,OAAP,KAAoB,oBAApB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,OAAQC,QAAR,KAAuB,kBAAvB,CACA,OAAQC,MAAR,KAAqB,cAArB,C,GAGMC,CAAAA,K,mUACFC,K,CAAQ,CACJC,eAAe,CAAE,KADb,CAEJC,YAAY,CAAE,KAFV,CAGJC,eAAe,CAAE,KAHb,C,OAWRC,K,CAAQ,SAACC,IAAD,CAAOC,UAAP,CAAsB,IACnBC,CAAAA,QADmB,CACGF,IADH,CACnBE,QADmB,CACTC,QADS,CACGH,IADH,CACTG,QADS,CAG1B,MAAKC,QAAL,CAAc,CAACR,eAAe,CAAE,IAAlB,CAAd,CAAsC,UAAM,CACxCH,MAAM,CAACM,KAAP,CAAa,CAACG,QAAQ,CAARA,QAAD,CAAWC,QAAQ,CAARA,QAAX,CAAb,CAAmCF,UAAnC,EACKI,IADL,CACU,UAAM,CACR,MAAKC,KAAL,CAAWC,gBAAX,GACA,MAAKH,QAAL,CAAc,CACVR,eAAe,CAAE,KADP,CAEVE,eAAe,CAAE,IAFP,CAAd,EAIH,CAPL,EAQKU,KARL,CAQW,SAAAC,GAAG,CAAI,CACVC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,QAAhB,EACA,MAAKR,QAAL,CAAc,CACVR,eAAe,CAAE,KADP,CAEVC,YAAY,CAAE,IAFJ,CAAd,EAIH,CAdL,EAeH,CAhBD,EAiBH,C,OACDgB,Y,CAAe,UAAM,CACjB,GAAG,CAAC,MAAKP,KAAL,CAAWQ,QAAf,CAAyB,MAAO,QAAP,CACzB,GAAMC,CAAAA,aAAa,CAAG,MAAKT,KAAL,CAAWQ,QAAX,CAAoBnB,KAA1C,CACA,GAAMqB,CAAAA,QAAQ,CACVD,aAAa,EAAIA,aAAa,CAACE,IAA/B,EAAuCF,aAAa,CAACE,IAAd,CAAmBD,QAD9D,CAGA,MAAOA,CAAAA,QAAQ,EAAI,GAAnB,CACH,C,8FAlCmB,CAChB,GAAGvB,MAAM,CAACyB,UAAP,EAAH,CAAuB,CACnB,KAAKd,QAAL,CAAc,CAACN,eAAe,CAAE,IAAlB,CAAd,EACH,CACJ,C,uCA+BO,CACJ,GAAG,KAAKH,KAAL,CAAWG,eAAd,CAA8B,CAC1B,mBACI,oBAAC,QAAD,EAAU,EAAE,CAAE,KAAKe,YAAL,EAAd,EADJ,CAGH,CAJD,IAIO,IAAG,KAAKlB,KAAL,CAAWC,eAAd,CAA+B,CAClC,mBACI,2BAAK,SAAS,CAAC,+EAAf,eACI,oBAAC,OAAD,EAAS,QAAQ,CAAC,MAAlB,EADJ,CADJ,CAMH,CAPM,IAOA,CACH,mBACI,2BAAK,SAAS,CAAC,8BAAf,eACI,oBAAC,SAAD,EACI,UAAU,CAAE,IADhB,CAEI,KAAK,CAAE,KAAKG,KAFhB,CAGI,WAAW,CAAE,KAAKJ,KAAL,CAAWE,YAH5B,EADJ,CADJ,CASH,CAEJ,C,mBAjEeR,KAAK,CAAC8B,S,EAoE1B,cAAezB,CAAAA,KAAf","sourcesContent":["import React from 'react';\nimport './Login.css';\nimport Loading from '../Loading/Loading';\nimport LoginForm from '../LoginForm/LoginForm';\nimport {Redirect} from 'react-router-dom';\nimport {client} from '../../Client';\n\n\nclass Login extends React.Component{\n    state = {\n        _loginInProcess: false,\n        _loginFailed: false,\n        _shouldRedirect: false\n    }\n    componentDidMount() {\n        if(client.isLoggedIn()){\n            this.setState({_shouldRedirect: true})\n        }\n    }\n\n    login = (data, rememberMe) => {\n        const {username, password} = data;\n\n        this.setState({_loginInProcess: true},() => {\n            client.login({username, password}, rememberMe)\n                .then(() => {\n                    this.props.loggedInCallback();\n                    this.setState({\n                        _loginInProcess: false,\n                        _shouldRedirect: true\n                    })\n                })\n                .catch(err => {\n                    console.log(err.response);\n                    this.setState({\n                        _loginInProcess: false,\n                        _loginFailed: true\n                    })\n                })\n        })\n    }\n    redirectPath = () => {\n        if(!this.props.location) return '/login';\n        const locationState = this.props.location.state;\n        const pathname = (\n            locationState && locationState.from && locationState.from.pathname\n        );\n        return pathname || '/'\n    }\n    render(){\n        if(this.state._shouldRedirect){\n            return (\n                <Redirect to={this.redirectPath()}/>\n            )\n        } else if(this.state._loginInProcess) {\n            return (\n                <div className='mx-auto d-flex align-items-center justify-content-center login_form_container'>\n                    <Loading velocity='slow'/>\n                </div>\n\n            )\n        } else {\n            return (\n                <div className='mx-auto login_form_container'>\n                    <LoginForm\n                        longInputs={true}\n                        login={this.login}\n                        loginFailed={this.state._loginFailed}\n                    />\n                </div>\n            )\n        }\n\n    }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}